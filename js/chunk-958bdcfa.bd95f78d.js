(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-958bdcfa"],{6135:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a={class:"container py-5"},c={key:1,class:"table"},s=Object(n["g"])("thead",{class:"thead-dark"},[Object(n["g"])("tr",null,[Object(n["g"])("th",{scope:"col"}," # "),Object(n["g"])("th",{scope:"col"}," Email "),Object(n["g"])("th",{scope:"col"}," Role "),Object(n["g"])("th",{scope:"col",width:"140"}," Action ")])],-1),i={scope:"row"},u=["onClick"];function o(e,t,r,o,d,b){var f=Object(n["z"])("AdminNav"),l=Object(n["z"])("Spinner");return Object(n["s"])(),Object(n["f"])("div",a,[Object(n["i"])(f),d.isLoading?(Object(n["s"])(),Object(n["d"])(l,{key:0})):(Object(n["s"])(),Object(n["f"])("table",c,[s,Object(n["g"])("tbody",null,[(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(d.users,(function(t){return Object(n["s"])(),Object(n["f"])("tr",{key:t.id},[Object(n["g"])("th",i,Object(n["B"])(t.id),1),Object(n["g"])("td",null,Object(n["B"])(t.email),1),Object(n["g"])("td",null,Object(n["B"])(t.isAdmin?"admin":"user"),1),Object(n["g"])("td",null,[e.currentUser.id!==t.id?(Object(n["s"])(),Object(n["f"])("button",{key:0,type:"button",class:"btn btn-link",onClick:function(e){return b.toggleUserRole({userId:t.id,isAdmin:t.isAdmin})}},Object(n["B"])(t.isAdmin?"set as user":"set as admin"),9,u)):Object(n["e"])("",!0)])])})),128))])]))])}r("d81d"),r("d3b7"),r("25f0"),r("96cf");var d=r("1da1"),b=r("5530"),f=r("e04c"),l=r("5502"),m=r("be6c"),g=r("2fa3"),j=r("2375"),O={components:{AdminNav:f["a"],Spinner:j["a"]},data:function(){return{users:[],isLoading:!0}},computed:Object(b["a"])({},Object(l["b"])(["currentUser"])),created:function(){this.fetchUsers()},methods:{fetchUsers:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,m["a"].users.get();case 4:if(r=t.sent,n=r.data,"error"!==n.status){t.next=8;break}throw new Error(n.message);case 8:e.users=n.users,e.isLoading=!1,t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](0),e.isLoading=!1,console.error(t.t0.message),g["a"].fire({icon:"error",title:"無法取得會員資料，請稍後再試"});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))()},toggleUserRole:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,a,c,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.userId,a=e.isAdmin,r.prev=1,r.next=4,m["a"].users.update({userId:n,isAdmin:(!a).toString()});case 4:if(c=r.sent,s=c.data,"error"!==s.status){r.next=8;break}throw new Error(s.message);case 8:t.users=t.users.map((function(e){return e.id===n?Object(b["a"])(Object(b["a"])({},e),{},{isAdmin:!a}):e})),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](1),console.error(r.t0.message),g["a"].fire({icon:"error",title:"無法更新會員角色，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[1,11]])})))()}}};O.render=o;t["default"]=O},be6c:function(e,t,r){"use strict";r("b0c0");var n=r("2fa3");t["a"]={categories:{getDetail:function(e){var t=e.categoryId;return n["b"].get("/admin/categories/".concat(t))},get:function(){return n["b"].get("/admin/categories")},create:function(e){var t=e.name;return n["b"].post("/admin/categories",{name:t})},update:function(e){var t=e.categoryId,r=e.name;return n["b"].put("/admin/categories/".concat(t),{name:r})},delete:function(e){var t=e.categoryId;return n["b"].delete("/admin/categories/".concat(t))}},restaurants:{getDetail:function(e){var t=e.restaurantId;return n["b"].get("/admin/restaurants/".concat(t))},get:function(){return n["b"].get("/admin/restaurants")},create:function(e){var t=e.formData;return n["b"].post("/admin/restaurants",t)},update:function(e){var t=e.restaurantId,r=e.formData;return n["b"].put("/admin/restaurants/".concat(t),r)},delete:function(e){var t=e.restaurantId;return n["b"].delete("/admin/restaurants/".concat(t))}},users:{get:function(){return n["b"].get("/admin/users")},update:function(e){var t=e.userId,r=e.isAdmin;return n["b"].put("/admin/users/".concat(t),{isAdmin:r})}}}},d81d:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").map,c=r("1dde"),s=r("ae40"),i=c("map"),u=s("map");n({target:"Array",proto:!0,forced:!i||!u},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},e04c:function(e,t,r){"use strict";var n=r("7a23"),a={class:"mb-3"},c=Object(n["g"])("h1",null,"餐廳後台",-1),s=Object(n["h"])(" Restaurants "),i=Object(n["h"])(" | "),u=Object(n["h"])(" Categories "),o=Object(n["h"])(" | "),d=Object(n["h"])(" Users ");function b(e,t){var r=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["f"])("div",a,[c,Object(n["i"])(r,{to:"/admin/restaurants"},{default:Object(n["H"])((function(){return[s]})),_:1}),i,Object(n["i"])(r,{to:"/admin/categories"},{default:Object(n["H"])((function(){return[u]})),_:1}),o,Object(n["i"])(r,{to:"/admin/users"},{default:Object(n["H"])((function(){return[d]})),_:1})])}const f={};f.render=b;t["a"]=f}}]);
//# sourceMappingURL=chunk-958bdcfa.bd95f78d.js.map