{"version":3,"sources":["webpack:///./src/views/AdminRestaurants.vue","webpack:///./src/components/AdminRestaurantsTable.vue","webpack:///./src/components/AdminRestaurantsTable.vue?5995","webpack:///./src/views/AdminRestaurants.vue?fcde","webpack:///./src/apis/admin.js","webpack:///./src/components/AdminNav.vue","webpack:///./src/components/AdminNav.vue?343e"],"names":["class","_createElementBlock","_createVNode","_component_AdminNav","_component_router_link","to","_component_AdminRestaurantsTable","_createElementVNode","scope","width","_ctx","_createBlock","_component_Spinner","key","_hoisted_2","_Fragment","_renderList","$data","restaurant","id","_toDisplayString","Category","name","params","type","onClick","$options","_hoisted_7","components","Spinner","data","restaurants","isLoading","created","this","fetchRestaurants","methods","adminAPI","get","console","log","status","Error","message","Toast","fire","icon","title","deleteRestaurant","restaurantId","delete","filter","render","AdminNav","AdminRestaurantsTable","categories","getDetail","categoryId","apiHelper","create","post","update","put","formData","users","userId","isAdmin","script"],"mappings":"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","file":"js/chunk-71c50812.018163c0.js","sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <!-- 後台導覽頁籤 AdminNav -->\r\n    <AdminNav />\r\n\r\n    <router-link\r\n      to=\"/admin/restaurants/new\"\r\n      class=\"btn btn-primary mb-4\"\r\n    >\r\n      New Restaurant\r\n    </router-link>\r\n\r\n    <!-- 後台餐廳列表 AdminRestaurantsTable -->\r\n    <AdminRestaurantsTable />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AdminNav from './../components/AdminNav'\r\nimport AdminRestaurantsTable from './../components/AdminRestaurantsTable'\r\n\r\nexport default {\r\n  components: {\r\n    AdminNav,\r\n    AdminRestaurantsTable\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <Spinner v-if=\"loading\" />\r\n  <table\r\n    v-else\r\n    class=\"table\"\r\n  >\r\n    <thead class=\"thead-dark\">\r\n      <tr>\r\n        <th scope=\"col\">\r\n          #\r\n        </th>\r\n        <th scope=\"col\">\r\n          Category\r\n        </th>\r\n        <th scope=\"col\">\r\n          Name\r\n        </th>\r\n        <th\r\n          scope=\"col\"\r\n          width=\"300\"\r\n        >\r\n          操作\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr\r\n        v-for=\"restaurant in restaurants\"\r\n        :key=\"restaurant.id\"\r\n      >\r\n        <th scope=\"row\">\r\n          {{ restaurant.id }}\r\n        </th>\r\n        <td>{{ restaurant.Category ? restaurant.Category.name : '未分類' }}</td>\r\n        <td>{{ restaurant.name }}</td>\r\n        <td class=\"d-flex justify-content-between\">\r\n          <router-link\r\n            :to=\"{name: 'admin-restaurant', params: {id: restaurant.id}}\"\r\n            class=\"btn btn-link\"\r\n          >\r\n            Show\r\n          </router-link>\r\n\r\n          <router-link\r\n            :to=\"{name: 'admin-restaurant-edit', params: {id: restaurant.id}}\"\r\n            class=\"btn btn-link\"\r\n          >\r\n            Edit\r\n          </router-link>\r\n\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-link\"\r\n            @click.stop.prevent=\"deleteRestaurant(restaurant.id)\"\r\n          >\r\n            Delete\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</template>\r\n\r\n<script>\r\nimport adminAPI from './../apis/admin'\r\nimport { Toast } from './../utils/helpers'\r\nimport Spinner from './../components/Spinner'\r\n\r\nexport default {\r\n  components: {\r\n    Spinner\r\n  },\r\n  data () {\r\n    return {\r\n      restaurants: [],\r\n      isLoading: true\r\n    }\r\n  },\r\n  created () {\r\n    this.fetchRestaurants()\r\n  },\r\n  methods: {\r\n    async fetchRestaurants () {\r\n      try {\r\n        this.isLoading = true\r\n        const { data } = await adminAPI.restaurants.get()\r\n        console.log('DATA: ', data)\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n        this.restaurants = data.restaurants\r\n        this.isLoading = false\r\n      } catch (error) {\r\n        this.isLoading = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取得餐廳，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async deleteRestaurant (restaurantId) {\r\n      try {\r\n        const { data } = await adminAPI.restaurants.delete({\r\n          restaurantId\r\n        })\r\n        if (data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n        this.restaurants = this.restaurants.filter(\r\n          restaurant => restaurant.id !== restaurantId\r\n        )\r\n        Toast.fire({\r\n          icon: 'success',\r\n          title: '刪除餐廳成功'\r\n        })\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法刪除餐廳，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./AdminRestaurantsTable.vue?vue&type=template&id=40e9d4f2\"\nimport script from \"./AdminRestaurantsTable.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRestaurantsTable.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./AdminRestaurants.vue?vue&type=template&id=4fc29353\"\nimport script from \"./AdminRestaurants.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRestaurants.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { apiHelper } from './../utils/helpers'\r\n\r\nexport default {\r\n  categories: {\r\n    getDetail ({ categoryId }) {\r\n      return apiHelper.get(`/admin/categories/${categoryId}`)\r\n    },\r\n    get () {\r\n      return apiHelper.get('/admin/categories')\r\n    },\r\n    create ({ name }) {\r\n      return apiHelper.post('/admin/categories', { name })\r\n    },\r\n    update ({ categoryId, name }) {\r\n      return apiHelper.put(`/admin/categories/${categoryId}`, { name })\r\n    },\r\n    delete ({ categoryId }) {\r\n      return apiHelper.delete(`/admin/categories/${categoryId}`)\r\n    }\r\n  },\r\n  restaurants: {\r\n    getDetail ({ restaurantId }) {\r\n      return apiHelper.get(`/admin/restaurants/${restaurantId}`)\r\n    },\r\n    get () {\r\n      return apiHelper.get('/admin/restaurants')\r\n    },\r\n    create ({ formData }) {\r\n      return apiHelper.post('/admin/restaurants', formData)\r\n    },\r\n    update ({ restaurantId, formData }) {\r\n      return apiHelper.put(`/admin/restaurants/${restaurantId}`, formData)\r\n    },\r\n    delete ({ restaurantId }) {\r\n      return apiHelper.delete(`/admin/restaurants/${restaurantId}`)\r\n    }\r\n  },\r\n  users: {\r\n    get () {\r\n      return apiHelper.get('/admin/users')\r\n    },\r\n    update ({ userId, isAdmin }) {\r\n      return apiHelper.put(\r\n        `/admin/users/${userId}`,\r\n        { isAdmin }\r\n      )\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"mb-3\">\r\n    <h1>餐廳後台</h1>\r\n    <router-link to=\"/admin/restaurants\">\r\n      Restaurants\r\n    </router-link>&nbsp;|\r\n    <router-link to=\"/admin/categories\">\r\n      Categories\r\n    </router-link>&nbsp;|\r\n    <router-link to=\"/admin/users\">\r\n      Users\r\n    </router-link>\r\n  </div>\r\n</template>\r\n","import { render } from \"./AdminNav.vue?vue&type=template&id=1bdbae34\"\nconst script = {}\nscript.render = render\n\nexport default script"],"sourceRoot":""}