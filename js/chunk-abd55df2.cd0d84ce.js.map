{"version":3,"sources":["webpack:///./src/components/NewestRestaurants.vue?6f7a","webpack:///./src/views/RestaurantsFeeds.vue","webpack:///./src/components/NewestRestaurants.vue","webpack:///./src/components/NewestRestaurants.vue?f944","webpack:///./src/components/NewestComments.vue","webpack:///./src/components/NewestComments.vue?b3f4","webpack:///./src/views/RestaurantsFeeds.vue?7c1a"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_NavTabs","$data","_createBlock","_component_Spinner","key","_Fragment","_hoisted_2","_hoisted_3","_component_NewestRestaurants","restaurants","_component_NewestComments","comments","_renderList","$props","restaurant","id","_component_router_link","to","name","params","_toDisplayString","Category","description","_ctx","createdAt","mixins","fromNowMethod","props","type","Array","required","render","__scopeId","comment","Restaurant","text","User","components","NavTabs","NewestRestaurants","NewestComments","Spinner","data","isLoading","created","this","fetchFeeds","methods","restaurantsAPI","getFeeds","statusText","Error","filter","Toast","fire","icon","title"],"mappings":"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","file":"js/chunk-abd55df2.cd0d84ce.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NewestRestaurants.vue?vue&type=style&index=0&id=f6ffb756&scoped=true&lang=css\"","<template>\r\n  <div class=\"container py-5\">\r\n    <!-- 使用 isLoading 搭配 v-if 和 v-else 來決定要不要顯示 Spinner -->\r\n    <NavTabs />\r\n    <Spinner v-if=\"isLoading\" />\r\n    <template v-else>\r\n      <h1 class=\"mt-5\">\r\n        最新動態\r\n      </h1>\r\n      <hr>\r\n      <div class=\"row\">\r\n        <!-- 「最新餐廳」和「最新評論」這兩個區塊雖然不會和其他頁面共用，但是為了避免在同一個頁面放入太多的樣板和資料造成後續難以維護，因此我們還是會把他額外拆成兩個不同的元件。 -->\r\n        <div class=\"col-md-6\">\r\n          <!-- 用v-bind把資料綁定 -->\r\n          <NewestRestaurants :restaurants=\"restaurants\" />\r\n        </div>\r\n        <div class=\"col-md-6\">\r\n          <!-- 最新評論 NewestComments-->\r\n          <NewestComments :comments=\"comments\" />\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavTabs from '../components/NavTabs'\r\nimport NewestRestaurants from '../components/NewestRestaurants'\r\nimport NewestComments from '../components/NewestComments'\r\nimport Spinner from '../components/Spinner'\r\n\r\nimport restaurantsAPI from './../apis/restaurants'\r\nimport { Toast } from './../utils/helpers'\r\n\r\nexport default {\r\n  components: {\r\n    NavTabs,\r\n    NewestRestaurants,\r\n    NewestComments,\r\n    Spinner\r\n  },\r\n  data () {\r\n    return {\r\n      restaurants: [],\r\n      comments: [],\r\n      isLoading: true\r\n    }\r\n  },\r\n  created () {\r\n    this.fetchFeeds()\r\n  },\r\n  methods: {\r\n    async fetchFeeds () {\r\n      try {\r\n        const { data, statusText } = await restaurantsAPI.getFeeds()\r\n\r\n        if (statusText !== 'OK') {\r\n          throw new Error(statusText)\r\n        }\r\n\r\n        const { restaurants, comments } = data\r\n        this.restaurants = restaurants\r\n        this.comments = comments.filter(comment => comment.Restaurant && comment.text)\r\n        this.isLoading = false\r\n      } catch (error) {\r\n        this.isLoading = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取得最新動態，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <div class=\"card\">\r\n    <div class=\"card-header\">\r\n      最新餐廳\r\n    </div>\r\n    <div class=\"card-body\">\r\n      <div\r\n        v-for=\"restaurant in restaurants\"\r\n        :key=\"restaurant.id\"\r\n      >\r\n        <h4>\r\n          <router-link\r\n            :to=\"{ name: 'restaurant', params: {id: restaurant.id}}\"\r\n          >\r\n            {{ restaurant.name }}\r\n          </router-link>\r\n          &nbsp;\r\n          <!-- 用三元運算子，避免未分類的資料顯示不出來 -->\r\n          <small>{{ restaurant.Category ? restaurant.Category.name : '未分類' }}</small>\r\n        </h4>\r\n        <p>{{ restaurant.description }}</p>\r\n        {{ fromNow(restaurant.createdAt) }}\r\n        <hr>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 載入撰寫好的 mixin\r\nimport { fromNowMethod } from './../utils/mixins'\r\n\r\nexport default {\r\n  // 透過 mixins 屬性將撰寫好的 mixin 放入\r\n  mixins: [fromNowMethod],\r\n  // 加上 props 屬性取得父層資料\r\n  props: {\r\n    restaurants: {\r\n      type: Array,\r\n      required: true // 一定要傳進來，才不會出錯\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nsmall {\r\n  font-size: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./NewestRestaurants.vue?vue&type=template&id=f6ffb756&scoped=true\"\nimport script from \"./NewestRestaurants.vue?vue&type=script&lang=js\"\nexport * from \"./NewestRestaurants.vue?vue&type=script&lang=js\"\n\nimport \"./NewestRestaurants.vue?vue&type=style&index=0&id=f6ffb756&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-f6ffb756\"\n\nexport default script","<template>\r\n  <div class=\"card\">\r\n    <div class=\"card-header\">\r\n      最新評論\r\n    </div>\r\n    <div\r\n      v-for=\"comment in comments\"\r\n      :key=\"comment.id\"\r\n    >\r\n      <h4>\r\n        <router-link\r\n          :to=\"{ name: 'restaurant', params: {id: comment.Restaurant.id}}\"\r\n        >\r\n          {{ comment.Restaurant.name }}\r\n        </router-link>\r\n      </h4>\r\n      <p>{{ comment.text }}</p>by\r\n      <router-link :to=\"{ name: 'user', params: { id: comment.User.id } }\">\r\n        {{ comment.User.name }}\r\n      </router-link>\r\n      {{ fromNow(comment.createdAt) }}\r\n      <hr>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 載入撰寫好的 mixin\r\nimport { fromNowMethod } from './../utils/mixins'\r\n\r\nexport default {\r\n  // 透過 mixins 屬性將撰寫好的 mixin 放入\r\n  mixins: [fromNowMethod],\r\n  props: {\r\n    comments: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./NewestComments.vue?vue&type=template&id=55afd68f\"\nimport script from \"./NewestComments.vue?vue&type=script&lang=js\"\nexport * from \"./NewestComments.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./RestaurantsFeeds.vue?vue&type=template&id=6a748f93\"\nimport script from \"./RestaurantsFeeds.vue?vue&type=script&lang=js\"\nexport * from \"./RestaurantsFeeds.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}