(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-010cf8f7"],{1511:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),s={class:"album py-5 bg-light"},o={class:"container"},a={class:"row"},i={class:"col-md-4"},c=Object(n["g"])("br",null,null,-1),l={class:"col-md-8"};function u(e,t,r,u,d,f){var b=Object(n["z"])("UserProfileCard"),g=Object(n["z"])("UserFollowingsCard"),v=Object(n["z"])("UserFollowersCard"),O=Object(n["z"])("UserCommentsCard"),j=Object(n["z"])("UserFavoritedRestaurantsCard");return Object(n["s"])(),Object(n["f"])("div",s,[Object(n["g"])("div",o,[Object(n["i"])(b,{user:d.user,"is-current-user":e.currentUser.id===d.user.id,"initial-is-followed":d.isFollowed,onAfterAlterFollow:f.afterAlterFollow},null,8,["user","is-current-user","initial-is-followed","onAfterAlterFollow"]),Object(n["g"])("div",a,[Object(n["g"])("div",i,[Object(n["i"])(g,{followings:e.followings},null,8,["followings"]),c,Object(n["i"])(v,{followers:e.followers},null,8,["followers"])]),Object(n["g"])("div",l,[Object(n["i"])(O,{comments:e.comments},null,8,["comments"]),Object(n["i"])(j,{"favorited-restaurants":e.favoritedRestaurants},null,8,["favorited-restaurants"])])])])])}r("4de4"),r("b0c0"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("96cf");var d=r("1da1"),f=r("5530"),b={class:"card mb-3"},g={class:"row no-gutters"},v={class:"col-md-4"},O=["src"],j={class:"col-md-8"},h={class:"card-body"},m={class:"card-title"},w={class:"card-text"},p={class:"list-unstyled"},y=Object(n["h"])(" 已評論餐廳 "),F=Object(n["h"])(" 收藏的餐廳 "),x=Object(n["h"])(" followings (追蹤者) "),k=Object(n["h"])(" followers (追隨者) "),R=Object(n["h"])(" Edit ");function U(e,t,r,s,o,a){var i=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["f"])("div",b,[Object(n["g"])("div",g,[Object(n["g"])("div",v,[Object(n["g"])("img",{src:r.user.image,width:"300",height:"300"},null,8,O)]),Object(n["g"])("div",j,[Object(n["g"])("div",h,[Object(n["g"])("h5",m,Object(n["B"])(r.user.name),1),Object(n["g"])("p",w,Object(n["B"])(r.user.email),1),Object(n["g"])("ul",p,[Object(n["g"])("li",null,[Object(n["g"])("strong",null,Object(n["B"])(r.user.commentsLength),1),y]),Object(n["g"])("li",null,[Object(n["g"])("strong",null,Object(n["B"])(r.user.favoritedRestaurantsLength),1),F]),Object(n["g"])("li",null,[Object(n["g"])("strong",null,Object(n["B"])(r.user.followingsLength),1),x]),Object(n["g"])("li",null,[Object(n["g"])("strong",null,Object(n["B"])(r.user.followersLength),1),k])]),r.isCurrentUser?(Object(n["s"])(),Object(n["d"])(i,{key:0,to:{name:"user-edit",params:{id:r.user.id}},class:"btn btn-primary"},{default:Object(n["H"])((function(){return[R]})),_:1},8,["to"])):(Object(n["s"])(),Object(n["f"])(n["a"],{key:1},[o.isFollowed?(Object(n["s"])(),Object(n["f"])("button",{key:0,type:"button",class:"btn btn-danger",onClick:t[0]||(t[0]=Object(n["J"])((function(e){return a.deleteFollowing(r.user.id)}),["stop","prevent"]))}," 取消追蹤 ")):(Object(n["s"])(),Object(n["f"])("button",{key:1,type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=Object(n["J"])((function(e){return a.addFollowing(r.user.id)}),["stop","prevent"]))}," 追蹤 "))],64))])])])])}var z=r("2708"),C=r("4cce"),E=r("2fa3"),I={mixins:[z["a"]],props:{user:{type:Object,required:!0},isCurrentUser:{type:Boolean,required:!0},initialIsFollowed:{type:Boolean,required:!0}},emits:["after-alter-follow"],data:function(){return{isFollowed:this.initialIsFollowed}},watch:{initialIsFollowed:function(e){this.isFollowed=e}},methods:{addFollowing:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,C["a"].addFollowing({userId:e});case 3:if(n=r.sent,s=n.data,"error"!==s.status){r.next=7;break}throw new Error(s.message);case 7:t.isFollowed=!0,t.$emit("after-alter-follow",e),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.error(r.t0.message),E["a"].fire({icon:"error",title:"無法加入追蹤，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},deleteFollowing:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,C["a"].deleteFollowing({userId:e});case 3:if(n=r.sent,s=n.data,"error"!==s.status){r.next=7;break}throw new Error(s.message);case 7:t.isFollowed=!1,t.$emit("after-alter-follow",e),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.error(r.t0.message),E["a"].fire({icon:"error",title:"無法取消追蹤，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()}}};I.render=U;var A=I,B={class:"card mb-3"},L={class:"card-header"},S=Object(n["h"])(" followings (追蹤者) "),D={class:"card-body"},_=["src"];function H(e,t,r,s,o,a){var i=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["f"])("div",B,[Object(n["g"])("div",L,[Object(n["g"])("strong",null,Object(n["B"])(r.followings.length),1),S]),Object(n["g"])("div",D,[(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(r.followings,(function(e){return Object(n["s"])(),Object(n["d"])(i,{key:e.id,to:{name:"user",params:{id:e.id}}},{default:Object(n["H"])((function(){return[Object(n["g"])("img",{src:e.image,width:"60",height:"60",class:"mr-1"},null,8,_)]})),_:2},1032,["to"])})),128))])])}var P={props:{followings:{type:Array,default:function(){return[]}}}};P.render=H;var q=P,J={class:"card"},Q={class:"card-header"},$=Object(n["h"])(" followers (追隨者) "),K={class:"card-body"},N=["src"];function T(e,t,r,s,o,a){var i=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["f"])("div",J,[Object(n["g"])("div",Q,[Object(n["g"])("strong",null,Object(n["B"])(r.followers.length),1),$]),Object(n["g"])("div",K,[(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(r.followers,(function(e){return Object(n["s"])(),Object(n["d"])(i,{key:e.id,to:{name:"user",params:{id:e.id}}},{default:Object(n["H"])((function(){return[Object(n["g"])("img",{src:e.image,width:"60",height:"60",class:"mr-1"},null,8,N)]})),_:2},1032,["to"])})),128))])])}var W={props:{followers:{type:Array,default:function(){return[]}}}};W.render=T;var M=W,G={class:"card"},V={class:"card-header"},X=Object(n["h"])(" 已評論餐廳 "),Y={class:"card-body"},Z=["src"];function ee(e,t,r,s,o,a){var i=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["f"])("div",G,[Object(n["g"])("div",V,[Object(n["g"])("strong",null,Object(n["B"])(r.comments.length),1),X]),Object(n["g"])("div",Y,[(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(r.comments,(function(e){return Object(n["s"])(),Object(n["d"])(i,{key:e.id,to:{name:"restaurant",params:{id:e.Restaurant.id}}},{default:Object(n["H"])((function(){return[Object(n["g"])("img",{src:e.Restaurant.image,width:"60",height:"60",class:"avatar"},null,8,Z)]})),_:2},1032,["to"])})),128))])])}var te={props:{comments:{type:Array,required:!0,default:function(){return[]}}}};te.render=ee;var re=te,ne={class:"card"},se={class:"card-header"},oe=Object(n["h"])(" 收藏的餐廳 "),ae={class:"card-body"},ie=["src"];function ce(e,t,r,s,o,a){var i=Object(n["z"])("router-link");return Object(n["s"])(),Object(n["f"])("div",ne,[Object(n["g"])("div",se,[Object(n["g"])("strong",null,Object(n["B"])(r.favoritedRestaurants.length),1),oe]),Object(n["g"])("div",ae,[(Object(n["s"])(!0),Object(n["f"])(n["a"],null,Object(n["y"])(r.favoritedRestaurants,(function(e){return Object(n["s"])(),Object(n["d"])(i,{key:e.id,to:{name:"restaurant",params:{id:e.id}}},{default:Object(n["H"])((function(){return[Object(n["g"])("img",{src:e.image,width:"60",height:"60",class:"mr-1"},null,8,ie)]})),_:2},1032,["to"])})),128))])])}var le={props:{favoritedRestaurants:{type:Array,default:function(){return[]}}}};le.render=ce;var ue=le,de=r("5502"),fe={name:"UserPage",components:{UserProfileCard:A,UserFollowingsCard:q,UserFollowersCard:M,UserCommentsCard:re,UserFavoritedRestaurantsCard:ue},beforeRouteUpdate:function(e,t,r){var n=e.params.id;this.fetchUser(n),r()},data:function(){return{user:{id:0,image:"",name:"",email:"",FollowingsLength:0,FollowersLength:0,CommentsLength:0,FavoritedRestaurants:0},isFollowed:!1,Followings:[],Followers:[],Comments:[],FavoritedRestaurants:[]}},computed:Object(f["a"])({},Object(de["b"])(["currentUser"])),created:function(){var e=this.$route.params.id;this.fetchUser(e)},methods:{fetchUser:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var n,s,o,a,i,c,l,u,d,b,g,v,O;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,C["a"].get({userId:e});case 3:if(n=r.sent,s=n.data,"error"!==s.status){r.next=7;break}throw new Error(s.message);case 7:o=s.profile,a=s.isFollowed,console.log("Profile",o),i=o.id,c=o.image,l=o.name,u=o.email,d=o.Followings,b=o.Followers,g=o.Comments,v=o.FavoritedRestaurants,O=new Set,t.comments=g.filter((function(e){return e.Restaurant&&!O.has(e.Restaurant.id)&&O.add(e.Restaurant.id)})),t.user=Object(f["a"])(Object(f["a"])({},t.user),{},{id:i,image:c,name:l,email:u,followingsLength:d.length,followersLength:b.length,commentsLength:t.comments.length,favoritedRestaurantsLength:v.length}),t.isFollowed=a,t.followings=d,t.followers=b,t.favoritedRestaurants=v,console.log("Follower",t.followers),r.next=24;break;case 20:r.prev=20,r.t0=r["catch"](0),console.error(r.t0.message),E["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 24:case"end":return r.stop()}}),r,null,[[0,20]])})))()},afterAlterFollow:function(e){this.fetchUser(e)}}};fe.render=u;t["default"]=fe},6062:function(e,t,r){"use strict";var n=r("6d61"),s=r("6566");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},6566:function(e,t,r){"use strict";var n=r("9bf2").f,s=r("7c73"),o=r("e2cc"),a=r("0366"),i=r("19aa"),c=r("2266"),l=r("7dd0"),u=r("2626"),d=r("83ab"),f=r("f183").fastKey,b=r("69f3"),g=b.set,v=b.getterFor;e.exports={getConstructor:function(e,t,r,l){var u=e((function(e,n){i(e,u,t),g(e,{type:t,index:s(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=n&&c(n,e[l],{that:e,AS_ENTRIES:r})})),b=v(t),O=function(e,t,r){var n,s,o=b(e),a=j(e,t);return a?a.value=r:(o.last=a={index:s=f(t,!0),key:t,value:r,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),d?o.size++:e.size++,"F"!==s&&(o.index[s]=a)),e},j=function(e,t){var r,n=b(e),s=f(t);if("F"!==s)return n.index[s];for(r=n.first;r;r=r.next)if(r.key==t)return r};return o(u.prototype,{clear:function(){var e=this,t=b(e),r=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,r=b(t),n=j(t,e);if(n){var s=n.next,o=n.previous;delete r.index[n.index],n.removed=!0,o&&(o.next=s),s&&(s.previous=o),r.first==n&&(r.first=s),r.last==n&&(r.last=o),d?r.size--:t.size--}return!!n},forEach:function(e){var t,r=b(this),n=a(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:r.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!j(this,e)}}),o(u.prototype,r?{get:function(e){var t=j(this,e);return t&&t.value},set:function(e,t){return O(this,0===e?0:e,t)}}:{add:function(e){return O(this,e=0===e?0:e,e)}}),d&&n(u.prototype,"size",{get:function(){return b(this).size}}),u},setStrong:function(e,t,r){var n=t+" Iterator",s=v(t),o=v(n);l(e,t,(function(e,t){g(this,{type:n,target:e,state:s(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),u(t)}}},"6d61":function(e,t,r){"use strict";var n=r("23e7"),s=r("da84"),o=r("94ca"),a=r("6eeb"),i=r("f183"),c=r("2266"),l=r("19aa"),u=r("861d"),d=r("d039"),f=r("1c7e"),b=r("d44e"),g=r("7156");e.exports=function(e,t,r){var v=-1!==e.indexOf("Map"),O=-1!==e.indexOf("Weak"),j=v?"set":"add",h=s[e],m=h&&h.prototype,w=h,p={},y=function(e){var t=m[e];a(m,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(O&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return O&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(O&&!u(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})};if(o(e,"function"!=typeof h||!(O||m.forEach&&!d((function(){(new h).entries().next()})))))w=r.getConstructor(t,e,v,j),i.REQUIRED=!0;else if(o(e,!0)){var F=new w,x=F[j](O?{}:-0,1)!=F,k=d((function(){F.has(1)})),R=f((function(e){new h(e)})),U=!O&&d((function(){var e=new h,t=5;while(t--)e[j](t,t);return!e.has(-0)}));R||(w=t((function(t,r){l(t,w,e);var n=g(new h,t,w);return void 0!=r&&c(r,n[j],{that:n,AS_ENTRIES:v}),n})),w.prototype=m,m.constructor=w),(k||U)&&(y("delete"),y("has"),v&&y("get")),(U||x)&&y(j),O&&m.clear&&delete m.clear}return p[e]=w,n({global:!0,forced:w!=h},p),b(w,e),O||r.setStrong(w,e,v),w}},bb2f:function(e,t,r){var n=r("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},f183:function(e,t,r){var n=r("d012"),s=r("861d"),o=r("5135"),a=r("9bf2").f,i=r("90e3"),c=r("bb2f"),l=i("meta"),u=0,d=Object.isExtensible||function(){return!0},f=function(e){a(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},b=function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,l)){if(!d(e))return"F";if(!t)return"E";f(e)}return e[l].objectID},g=function(e,t){if(!o(e,l)){if(!d(e))return!0;if(!t)return!1;f(e)}return e[l].weakData},v=function(e){return c&&O.REQUIRED&&d(e)&&!o(e,l)&&f(e),e},O=e.exports={REQUIRED:!1,fastKey:b,getWeakData:g,onFreeze:v};n[l]=!0}}]);
//# sourceMappingURL=chunk-010cf8f7.bd63dba2.js.map