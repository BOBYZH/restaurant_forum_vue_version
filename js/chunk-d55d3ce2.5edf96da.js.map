{"version":3,"sources":["webpack:///./src/views/UsersTop.vue","webpack:///./src/views/UsersTop.vue?a195","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["class","_createElementVNode","_createElementBlock","_createVNode","_component_NavTabs","$data","_createBlock","_component_Spinner","key","_Fragment","_hoisted_2","_hoisted_3","_renderList","user","id","_component_router_link","to","name","params","src","_ctx","image","width","height","_toDisplayString","followerCount","isFollowed","type","onClick","$options","_hoisted_8","_hoisted_9","components","NavTabs","Spinner","mixins","emptyImageMethod","data","users","isLoading","created","this","fetchTopUsers","methods","usersAPI","getTopUsers","status","Error","message","map","FollowerCount","console","error","Toast","fire","icon","title","addFollowing","userId","deleteFollowing","render","$","$map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/chunk-d55d3ce2.5edf96da.js","sourcesContent":["<template>\r\n  <div class=\"container py-5\">\r\n    <NavTabs />\r\n\r\n    <Spinner v-if=\"isLoading\" />\r\n    <template v-else>\r\n      <h1 class=\"mt-5\">\r\n        美食達人\r\n      </h1>\r\n      <hr>\r\n      <div class=\"row text-center\">\r\n        <div\r\n          v-for=\"user in users\"\r\n          :key=\"user.id\"\r\n          class=\"col-3\"\r\n        >\r\n          <router-link :to=\"{ name: 'user', params: { id: user.id } }\">\r\n            <img\r\n              :src=\"emptyImage(user.image)\"\r\n              width=\"140px\"\r\n              height=\"140px\"\r\n            >\r\n          </router-link>\r\n          <h2>{{ user.name }}</h2>\r\n          <span\r\n            class=\"badge badge-secondary\"\r\n          >追蹤人數：{{ user.followerCount }}</span>\r\n          <p class=\"mt-3\">\r\n            <button\r\n              v-if=\"user.isFollowed\"\r\n              type=\"button\"\r\n              class=\"btn btn-danger\"\r\n              @click.stop.prevent=\"deleteFollowing(user.id)\"\r\n            >\r\n              取消追蹤\r\n            </button>\r\n            <button\r\n              v-else\r\n              type=\"button\"\r\n              class=\"btn btn-primary\"\r\n              @click.stop.prevent=\"addFollowing(user.id)\"\r\n            >\r\n              追蹤\r\n            </button>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NavTabs from '../components/NavTabs'\r\nimport Spinner from './../components/Spinner'\r\nimport { emptyImageMethod } from './../utils/mixins'\r\nimport usersAPI from './../apis/users'\r\nimport { Toast } from './../utils/helpers'\r\n\r\nexport default {\r\n  name: 'UsersTop',\r\n  components: {\r\n    NavTabs,\r\n    Spinner\r\n  },\r\n  mixins: [emptyImageMethod],\r\n  data () {\r\n    return {\r\n      users: [],\r\n      isLoading: true\r\n    }\r\n  },\r\n  created () {\r\n    this.fetchTopUsers()\r\n  },\r\n  methods: {\r\n    async fetchTopUsers () {\r\n      try {\r\n        this.isLoading = true\r\n        const { data } = await usersAPI.getTopUsers()\r\n\r\n        if (data.status === 'error') {\r\n          throw new Error(data.message)\r\n        }\r\n\r\n        this.users = data.users.map(user => ({\r\n          id: user.id,\r\n          name: user.name,\r\n          image: user.image,\r\n          followerCount: user.FollowerCount,\r\n          isFollowed: user.isFollowed\r\n        }))\r\n        this.isLoading = false\r\n      } catch (error) {\r\n        // console.log(error)\r\n        console.error(error.message)\r\n        this.isLoading = false\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取得美食達人，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async addFollowing (userId) {\r\n      try {\r\n        const { data } = await usersAPI.addFollowing({ userId })\r\n        if (data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n        this.users = this.users.map(user => {\r\n          if (user.id !== userId) {\r\n            return user\r\n          } else {\r\n            return {\r\n              ...user,\r\n              followerCount: user.followerCount + 1,\r\n              isFollowed: true\r\n            }\r\n          }\r\n        })\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法加入追蹤，請稍後再試'\r\n        })\r\n      }\r\n    },\r\n    async deleteFollowing (userId) {\r\n      try {\r\n        const { data } = await usersAPI.deleteFollowing({ userId })\r\n        if (data.status !== 'success') {\r\n          throw new Error(data.message)\r\n        }\r\n        this.users = this.users.map(user => {\r\n          if (user.id !== userId) {\r\n            return user\r\n          } else {\r\n            return {\r\n              ...user,\r\n              followerCount: user.followerCount - 1,\r\n              isFollowed: false\r\n            }\r\n          }\r\n        })\r\n      } catch (error) {\r\n        Toast.fire({\r\n          icon: 'error',\r\n          title: '無法取消追蹤，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./UsersTop.vue?vue&type=template&id=ec279ef2\"\nimport script from \"./UsersTop.vue?vue&type=script&lang=js\"\nexport * from \"./UsersTop.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}