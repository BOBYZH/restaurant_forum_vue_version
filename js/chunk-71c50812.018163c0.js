(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71c50812"],{"73a3":function(t,e,n){"use strict";n.r(e);var r=n("7a23"),a={class:"container py-5"},c=Object(r["h"])(" New Restaurant ");function s(t,e,n,s,u,i){var o=Object(r["z"])("AdminNav"),b=Object(r["z"])("router-link"),d=Object(r["z"])("AdminRestaurantsTable");return Object(r["s"])(),Object(r["f"])("div",a,[Object(r["i"])(o),Object(r["i"])(b,{to:"/admin/restaurants/new",class:"btn btn-primary mb-4"},{default:Object(r["H"])((function(){return[c]})),_:1}),Object(r["i"])(d)])}var u=n("e04c"),i=(n("b0c0"),{key:1,class:"table"}),o=Object(r["g"])("thead",{class:"thead-dark"},[Object(r["g"])("tr",null,[Object(r["g"])("th",{scope:"col"}," # "),Object(r["g"])("th",{scope:"col"}," Category "),Object(r["g"])("th",{scope:"col"}," Name "),Object(r["g"])("th",{scope:"col",width:"300"}," 操作 ")])],-1),b={scope:"row"},d={class:"d-flex justify-content-between"},l=Object(r["h"])(" Show "),f=Object(r["h"])(" Edit "),j=["onClick"];function O(t,e,n,a,c,s){var u=Object(r["z"])("Spinner"),O=Object(r["z"])("router-link");return t.loading?(Object(r["s"])(),Object(r["d"])(u,{key:0})):(Object(r["s"])(),Object(r["f"])("table",i,[o,Object(r["g"])("tbody",null,[(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(c.restaurants,(function(t){return Object(r["s"])(),Object(r["f"])("tr",{key:t.id},[Object(r["g"])("th",b,Object(r["B"])(t.id),1),Object(r["g"])("td",null,Object(r["B"])(t.Category?t.Category.name:"未分類"),1),Object(r["g"])("td",null,Object(r["B"])(t.name),1),Object(r["g"])("td",d,[Object(r["i"])(O,{to:{name:"admin-restaurant",params:{id:t.id}},class:"btn btn-link"},{default:Object(r["H"])((function(){return[l]})),_:2},1032,["to"]),Object(r["i"])(O,{to:{name:"admin-restaurant-edit",params:{id:t.id}},class:"btn btn-link"},{default:Object(r["H"])((function(){return[f]})),_:2},1032,["to"]),Object(r["g"])("button",{type:"button",class:"btn btn-link",onClick:Object(r["J"])((function(e){return s.deleteRestaurant(t.id)}),["stop","prevent"])}," Delete ",8,j)])])})),128))])]))}n("4de4"),n("96cf");var m=n("1da1"),g=n("be6c"),p=n("2fa3"),h=n("2375"),v={components:{Spinner:h["a"]},data:function(){return{restaurants:[],isLoading:!0}},created:function(){this.fetchRestaurants()},methods:{fetchRestaurants:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,g["a"].restaurants.get();case 4:if(n=e.sent,r=n.data,console.log("DATA: ",r),"error"!==r.status){e.next=9;break}throw new Error(r.message);case 9:t.restaurants=r.restaurants,t.isLoading=!1,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](0),t.isLoading=!1,p["a"].fire({icon:"error",title:"無法取得餐廳，請稍後再試"});case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))()},deleteRestaurant:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g["a"].restaurants.delete({restaurantId:t});case 3:if(r=n.sent,a=r.data,"success"===a.status){n.next=7;break}throw new Error(a.message);case 7:e.restaurants=e.restaurants.filter((function(e){return e.id!==t})),p["a"].fire({icon:"success",title:"刪除餐廳成功"}),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](0),p["a"].fire({icon:"error",title:"無法刪除餐廳，請稍後再試"});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))()}}};v.render=O;var w=v,k={components:{AdminNav:u["a"],AdminRestaurantsTable:w}};k.render=s;e["default"]=k},be6c:function(t,e,n){"use strict";n("b0c0");var r=n("2fa3");e["a"]={categories:{getDetail:function(t){var e=t.categoryId;return r["b"].get("/admin/categories/".concat(e))},get:function(){return r["b"].get("/admin/categories")},create:function(t){var e=t.name;return r["b"].post("/admin/categories",{name:e})},update:function(t){var e=t.categoryId,n=t.name;return r["b"].put("/admin/categories/".concat(e),{name:n})},delete:function(t){var e=t.categoryId;return r["b"].delete("/admin/categories/".concat(e))}},restaurants:{getDetail:function(t){var e=t.restaurantId;return r["b"].get("/admin/restaurants/".concat(e))},get:function(){return r["b"].get("/admin/restaurants")},create:function(t){var e=t.formData;return r["b"].post("/admin/restaurants",e)},update:function(t){var e=t.restaurantId,n=t.formData;return r["b"].put("/admin/restaurants/".concat(e),n)},delete:function(t){var e=t.restaurantId;return r["b"].delete("/admin/restaurants/".concat(e))}},users:{get:function(){return r["b"].get("/admin/users")},update:function(t){var e=t.userId,n=t.isAdmin;return r["b"].put("/admin/users/".concat(e),{isAdmin:n})}}}},e04c:function(t,e,n){"use strict";var r=n("7a23"),a={class:"mb-3"},c=Object(r["g"])("h1",null,"餐廳後台",-1),s=Object(r["h"])(" Restaurants "),u=Object(r["h"])(" | "),i=Object(r["h"])(" Categories "),o=Object(r["h"])(" | "),b=Object(r["h"])(" Users ");function d(t,e){var n=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["f"])("div",a,[c,Object(r["i"])(n,{to:"/admin/restaurants"},{default:Object(r["H"])((function(){return[s]})),_:1}),u,Object(r["i"])(n,{to:"/admin/categories"},{default:Object(r["H"])((function(){return[i]})),_:1}),o,Object(r["i"])(n,{to:"/admin/users"},{default:Object(r["H"])((function(){return[b]})),_:1})])}const l={};l.render=d;e["a"]=l}}]);
//# sourceMappingURL=chunk-71c50812.018163c0.js.map