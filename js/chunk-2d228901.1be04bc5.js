(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d228901"],{da5c:function(e,t,r){"use strict";r.r(t);r("b0c0");var a=r("7a23"),n={class:"container py-5"},i={class:"form-group"},s=Object(a["g"])("label",{for:"name"},"Name",-1),c={class:"form-group"},o=Object(a["g"])("label",{for:"image"},"Image",-1),u=["src"],m={type:"submit",class:"btn btn-primary"};function d(e,t,r,d,l,b){return Object(a["s"])(),Object(a["f"])("div",n,[Object(a["g"])("form",{onSubmit:t[2]||(t[2]=Object(a["J"])((function(){return b.handleSubmit&&b.handleSubmit.apply(b,arguments)}),["stop","prevent"]))},[Object(a["g"])("div",i,[s,Object(a["I"])(Object(a["g"])("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=function(e){return l.name=e}),type:"text",name:"name",class:"form-control",placeholder:"Enter Name",required:""},null,512),[[a["E"],l.name]])]),Object(a["g"])("div",c,[o,l.image?(Object(a["s"])(),Object(a["f"])("img",{key:0,src:l.image,class:"d-block img-thumbnail mb-3",width:"200",height:"200"},null,8,u)):Object(a["e"])("",!0),Object(a["g"])("input",{id:"image",type:"file",name:"image",accept:"image/*",class:"form-control-file",onChange:t[1]||(t[1]=function(){return b.handleFileChange&&b.handleFileChange.apply(b,arguments)})},null,32)]),Object(a["g"])("button",m,Object(a["B"])(l.isProcessing?"資料更新中...":"Submit"),1)],32)])}r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("2b3d"),r("96cf");var l=r("1da1"),b=r("5530"),g=r("5502"),f=r("4cce"),h=r("2fa3"),p={beforeRouteUpdate:function(e,t,r){if(-1!==this.currentUser.id){var a=e.params.id;this.setUser(a),r()}},data:function(){return{id:0,image:"",name:"",email:"",isProcessing:!1}},computed:Object(b["a"])({},Object(g["b"])(["currentUser"])),watch:{currentUser:function(e){if(-1!==e.id){var t=this.$route.params.id;this.setUser(t)}}},created:function(){if(-1!==this.currentUser.id){var e=this.$route.params.id;this.setUser(e)}},methods:{setUser:function(e){var t=this.currentUser,r=t.id,a=t.image,n=t.name,i=t.email;r.toString()===e.toString()?(this.id=r,this.name=n,this.email=i,this.image=a):this.$router.push({name:"not-found"})},handleFileChange:function(e){var t=e.target.files;if(t.length){var r=window.URL.createObjectURL(t[0]);this.image=r}},handleSubmit:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,n,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,t.name){r.next=4;break}return h["a"].fire({icon:"warning",title:"您尚未填寫姓名"}),r.abrupt("return");case 4:return a=e.target,n=new FormData(a),t.isProcessing=!0,r.next=9,f["a"].update({userId:t.id,formData:n});case 9:if(i=r.sent,s=i.data,"error"!==s.status){r.next=13;break}throw new Error(s.message);case 13:t.$router.push({name:"user",params:{id:t.id}}),r.next=21;break;case 16:r.prev=16,r.t0=r["catch"](0),console.error(r.t0.message),t.isProcessing=!1,h["a"].fire({icon:"error",title:"無法更新使用者資料，請稍後再試"});case 21:case"end":return r.stop()}}),r,null,[[0,16]])})))()}}};p.render=d;t["default"]=p}}]);
//# sourceMappingURL=chunk-2d228901.1be04bc5.js.map